# Activity-audit

Ex 5: Auditing Cloud Activity Using AWS CloudTrail Aim: To enable and analyze AWS CloudTrail logs to audit user and resource activities in a cloud environment. Pre-requisites:

Background: AWS CloudTrail records all API calls made within an AWS account. This includes actions taken through the AWS Console, CLI, and SDKs. It is a foundational service for compliance, security monitoring, and operational troubleshooting.
Tools Required: ● AWS Console access ● CloudTrail service enabled ● S3 bucket (for storing logs) ● Optional: AWS Athena for querying logs ● IAM permissions to view audit logs
Procedure: Step 1: Enable CloudTrail ● Go to CloudTrail from AWS Console ● Click Trails > Create trail o Name: CloudAuditTrail o Apply trail to all regions: ✅ o Log events: ▪ Management events: Read & Write ▪ Data events: S3, Lambda (optional) o Create or select an S3 bucket for log storage o Enable CloudWatch Logs integration (optional) Step 2: Review Event History ● Go to Event history ● Filter events by: o Username (IAM role or user) o Event name (e.g., CreateBucket, TerminateInstances) o Date/Time o Resource type (e.g., S3, EC2) Step 3: Download or Export Logs ● Use the Download CSV option to export logs ● Analyze logs in Excel/Sheets for reporting Step 4 (Optional): Query Logs Using Athena ● Navigate to Amazon Athena ● Create a database pointing to the S3 log folder ● Create table schema using CloudTrail log structure ● Sample query: Sql command: SELECT userIdentity.userName, eventName, eventSource, sourceIPAddress, eventTime FROM cloudtrail_logs WHERE eventTime > current_date - interval '1' day; Sample Output: Observations: Event Time User Event Name Resource Source IP 2025-04-17 10:32 admin@xyz CreateVolume vol-abc 203.0.113.1 2025-04-17 11:15 ec2-role AttachVolume vol-abc internal Result: All AWS user activities, including volume creation, deletion, and permission chang
